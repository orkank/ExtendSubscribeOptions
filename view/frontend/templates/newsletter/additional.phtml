<?php
/** @var \IDangerous\ExtendSubscribeOptions\Block\Newsletter\Additional $block */
?>
<?php if ($block->isAnyOptionEnabled()): ?>
    <fieldset class="fieldset">
        <legend class="legend"><span><?= $block->escapeHtml(__('Additional Communication Preferences')) ?></span></legend>
        <?php if ($block->isCallEnabled()): ?>
            <div class="field choice subscription-option">
                <input type="checkbox"
                       name="subscription[allow_call]"
                       id="allow_call"
                       value="1"
                       title="<?= $block->escapeHtmlAttr($block->getOptionLabel('call')) ?>"
                       class="checkbox"
                       <?= $block->getCustomerPreference('allow_call') ? 'checked="checked"' : '' ?>>
                <label for="allow_call" class="label">
                    <span class="option-title"><?= $block->escapeHtml($block->getOptionLabel('call')) ?></span>
                    <?php if ($block->getOptionSubtitle('call')): ?>
                        <div class="option-subtitle">
                            <?= /* @noEscape */ $block->getOptionSubtitle('call') ?>
                        </div>
                    <?php endif; ?>
                    <?php if ($block->getOptionDescription('call')): ?>
                        <a href="#" class="read-more" data-mage-init='{"subscriptionModal": {"target": "#call-description-modal"}}'>
                            <?= $block->escapeHtml(__('Detaylı Bilgi')) ?>
                        </a>
                    <?php endif; ?>
                </label>
            </div>
        <?php endif; ?>

        <?php if ($block->isSmsEnabled()): ?>
            <div class="field choice subscription-option">
                <input type="checkbox"
                       name="subscription[allow_sms]"
                       id="allow_sms"
                       value="1"
                       title="<?= $block->escapeHtmlAttr($block->getOptionLabel('sms')) ?>"
                       class="checkbox"
                       <?= $block->getCustomerPreference('allow_sms') ? 'checked="checked"' : '' ?>>
                <label for="allow_sms" class="label">
                    <span class="option-title"><?= $block->escapeHtml($block->getOptionLabel('sms')) ?></span>
                    <?php if ($block->getOptionSubtitle('sms')): ?>
                        <div class="option-subtitle">
                            <?= /* @noEscape */ $block->getOptionSubtitle('sms') ?>
                        </div>
                    <?php endif; ?>
                    <?php if ($block->getOptionDescription('sms')): ?>
                        <a href="#" class="read-more" data-mage-init='{"subscriptionModal": {"target": "#sms-description-modal"}}'>
                            <?= $block->escapeHtml(__('Detaylı Bilgi')) ?>
                        </a>
                    <?php endif; ?>
                </label>
            </div>
        <?php endif; ?>

        <?php if ($block->isWhatsappEnabled()): ?>
            <div class="field choice subscription-option">
                <input type="checkbox"
                       name="subscription[allow_whatsapp]"
                       id="allow_whatsapp"
                       value="1"
                       title="<?= $block->escapeHtmlAttr($block->getOptionLabel('whatsapp')) ?>"
                       class="checkbox"
                       <?= $block->getCustomerPreference('allow_whatsapp') ? 'checked="checked"' : '' ?>>
                <label for="allow_whatsapp" class="label">
                    <span class="option-title"><?= $block->escapeHtml($block->getOptionLabel('whatsapp')) ?></span>
                    <?php if ($block->getOptionSubtitle('whatsapp')): ?>
                        <div class="option-subtitle">
                            <?= /* @noEscape */ $block->getOptionSubtitle('whatsapp') ?>
                        </div>
                    <?php endif; ?>
                    <?php if ($block->getOptionDescription('whatsapp')): ?>
                        <a href="#" class="read-more" data-mage-init='{"subscriptionModal": {"target": "#whatsapp-description-modal"}}'>
                            <?= $block->escapeHtml(__('Detaylı Bilgi')) ?>
                        </a>
                    <?php endif; ?>
                </label>
            </div>
        <?php endif; ?>
    </fieldset>

    <!-- Modal Containers -->
    <?php if ($block->isCallEnabled() && $block->getOptionDescription('call')): ?>
        <div id="call-description-modal" style="display: none;">
            <div class="modal-content">
                <?= /* @noEscape */ $block->getOptionDescription('call') ?>
            </div>
        </div>
    <?php endif; ?>

    <?php if ($block->isSmsEnabled() && $block->getOptionDescription('sms')): ?>
        <div id="sms-description-modal" style="display: none;">
            <div class="modal-content">
                <?= /* @noEscape */ $block->getOptionDescription('sms') ?>
            </div>
        </div>
    <?php endif; ?>

    <?php if ($block->isWhatsappEnabled() && $block->getOptionDescription('whatsapp')): ?>
        <div id="whatsapp-description-modal" style="display: none;">
            <div class="modal-content">
                <?= /* @noEscape */ $block->getOptionDescription('whatsapp') ?>
            </div>
        </div>
    <?php endif; ?>
<?php endif; ?>