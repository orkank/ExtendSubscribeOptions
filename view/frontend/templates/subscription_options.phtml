<?php
/** @var \IDangerous\ExtendSubscribeOptions\Block\SubscriptionOptions $block */
?>
<?php if ($block->isAnyOptionEnabled()): ?>
    <div class="extend_communication-preferences">
        <h4 class="extend_title"><span><?= $block->escapeHtml(__('Communication Preferences')) ?></span></h4>
        <hr>

        <!-- Email Subscription Option -->
        <?php if ($block->isEmailEnabled()): ?>
            <div class="field choice subscription-option">
                <input type="checkbox"
                       name="is_subscribed"
                       id="is_subscribed"
                       value="1"
                       title="<?= $block->escapeHtmlAttr($block->getOptionLabel('email')) ?>"
                       class="checkbox">
                <label for="is_subscribed" class="label">
                    <span class="option-title"><?= ($block->getOptionLabel('email')) ?></span>
                    <?php if ($block->getOptionSubtitle('email')): ?>
                        <div class="option-subtitle">
                            <?= /* @noEscape */ $block->getOptionSubtitle('email') ?>
                        </div>
                    <?php endif; ?>
                    <?php if ($block->getOptionDescription('email')): ?>
                        <a href="#" class="read-more" data-mage-init='{"subscriptionModal": {"target": "#email-description-modal"}}'>
                            <?= $block->escapeHtml(__('Detayl覺 Bilgi')) ?>
                        </a>
                    <?php endif; ?>
                </label>
            </div>
        <?php endif; ?>

        <?php if ($block->isCallEnabled()): ?>
            <div class="field choice subscription-option">
                <input type="checkbox"
                       name="subscription[allow_call]"
                       id="allow_call"
                       value="1"
                       title="<?= $block->escapeHtmlAttr($block->getOptionLabel('call')) ?>"
                       class="checkbox">
                <label for="allow_call" class="label">
                    <span class="option-title"><?= ($block->getOptionLabel('call')) ?></span>
                    <?php if ($block->getOptionSubtitle('call')): ?>
                        <div class="option-subtitle">
                            <?= /* @noEscape */ $block->getOptionSubtitle('call') ?>
                        </div>
                    <?php endif; ?>
                    <?php if ($block->getOptionDescription('call')): ?>
                        <a href="#" class="read-more" data-mage-init='{"subscriptionModal": {"target": "#call-description-modal"}}'>
                            <?= $block->escapeHtml(__('Detayl覺 Bilgi')) ?>
                        </a>
                    <?php endif; ?>
                </label>
            </div>
        <?php endif; ?>

        <?php if ($block->isSmsEnabled()): ?>
            <div class="field choice subscription-option">
                <input type="checkbox"
                       name="subscription[allow_sms]"
                       id="allow_sms"
                       value="1"
                       title="<?= $block->escapeHtmlAttr($block->getOptionLabel('sms')) ?>"
                       class="checkbox">
                <label for="allow_sms" class="label">
                    <span class="option-title"><?= ($block->getOptionLabel('sms')) ?></span>
                    <?php if ($block->getOptionSubtitle('sms')): ?>
                        <div class="option-subtitle">
                            <?= /* @noEscape */ $block->getOptionSubtitle('sms') ?>
                        </div>
                    <?php endif; ?>
                    <?php if ($block->getOptionDescription('sms')): ?>
                        <a href="#" class="read-more" data-mage-init='{"subscriptionModal": {"target": "#sms-description-modal"}}'>
                            <?= $block->escapeHtml(__('Detayl覺 Bilgi')) ?>
                        </a>
                    <?php endif; ?>
                </label>
            </div>
        <?php endif; ?>

        <?php if ($block->isWhatsappEnabled()): ?>
            <div class="field choice subscription-option">
                <input type="checkbox"
                       name="subscription[allow_whatsapp]"
                       id="allow_whatsapp"
                       value="1"
                       title="<?= $block->escapeHtmlAttr($block->getOptionLabel('whatsapp')) ?>"
                       class="checkbox">
                <label for="allow_whatsapp" class="label">
                    <span class="option-title"><?= ($block->getOptionLabel('whatsapp')) ?></span>
                    <?php if ($block->getOptionSubtitle('whatsapp')): ?>
                        <div class="option-subtitle">
                            <?= /* @noEscape */ $block->getOptionSubtitle('whatsapp') ?>
                        </div>
                    <?php endif; ?>
                    <?php if ($block->getOptionDescription('whatsapp')): ?>
                        <a href="#" class="read-more" data-mage-init='{"subscriptionModal": {"target": "#whatsapp-description-modal"}}'>
                            <?= $block->escapeHtml(__('Detayl覺 Bilgi')) ?>
                        </a>
                    <?php endif; ?>
                </label>
            </div>
        <?php endif; ?>
    </div>

    <!-- Modal Containers -->
    <?php if ($block->isEmailEnabled() && $block->getOptionDescription('email')): ?>
        <div id="email-description-modal" style="display: none;">
            <div class="modal-content">
                <?= /* @noEscape */ $block->getOptionDescription('email') ?>
            </div>
        </div>
    <?php endif; ?>

    <?php if ($block->isCallEnabled() && $block->getOptionDescription('call')): ?>
        <div id="call-description-modal" style="display: none;">
            <div class="modal-content">
                <?= /* @noEscape */ $block->getOptionDescription('call') ?>
            </div>
        </div>
    <?php endif; ?>

    <?php if ($block->isSmsEnabled() && $block->getOptionDescription('sms')): ?>
        <div id="sms-description-modal" style="display: none;">
            <div class="modal-content">
                <?= /* @noEscape */ $block->getOptionDescription('sms') ?>
            </div>
        </div>
    <?php endif; ?>

    <?php if ($block->isWhatsappEnabled() && $block->getOptionDescription('whatsapp')): ?>
        <div id="whatsapp-description-modal" style="display: none;">
            <div class="modal-content">
                <?= /* @noEscape */ $block->getOptionDescription('whatsapp') ?>
            </div>
        </div>
    <?php endif; ?>
<?php endif; ?>